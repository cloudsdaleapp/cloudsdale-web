= form_for @user, :multipart => true, :validate => true, html: { class: 'form-search'}  do |f|
  = f.fields_for :authentications do |authentications_form|
    = authentications_form.hidden_field :uid
    = authentications_form.hidden_field :provider
  %fieldset.active
    .btn-group
      - providers = @user.authentications.map{|a|a.provider.to_sym}
      = link_to image_tag("icons/cloud/facebook_cloud.png"), "/auth/facebook", :class => "btn btn-primary #{providers.include?(:facebook) ? 'disabled' : '' }", 'data-skip-pjax' => true
      = link_to image_tag("icons/cloud/twitter_cloud.png"), "/auth/twitter", :class => "btn btn-primary #{providers.include?(:twitter) ? 'disabled' : '' }", 'data-skip-pjax' => true
    
    = f.text_field :email, placeholder: "Email"
    - if @user.authentications.empty?
      = f.password_field :password, placeholder: "Password"
      = f.password_field :password_confirmation, placeholder: "Confirm"
    = link_to "#", :class => 'btn btn-info form_part_next' do
      = "Next"
      %i.icon-chevron-right.icon-white
  %fieldset
    = f.fields_for :character do |c_f|
      = link_to "#", :class => 'btn btn-info form_part_previous' do
        %i.icon-chevron-left.icon-white
        = "Previous"
      = c_f.text_field :name, :original_value => "", :attribute_name => :name, :user_id => "", :placeholder => "Display Name"
      = c_f.select :kind, Character::KINDS.collect { |k| [k.capitalize, k] }
      = c_f.select :gender, Character::GENDERS.collect { |g| [g.capitalize, g] }
      = f.submit "Register", :class => 'btn btn-success'

%nav.options
  = link_to "Login", login_path
  = link_to "Restore", restore_path
  //= link_to "Help", "help"


